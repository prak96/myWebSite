# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

parameters:
- name: 'project'
  displayName: 'project path'
  default: '**/*.csproj'

- name: 'buildconfig'
  displayName: 'build configuration name'
  default: 'debug'

steps:
    - task: DotNetCoreCLI@2
      displayName: 'restore task'
      inputs:
        command: restore
        projects: ${{parameters.project}}
        feedsToUse: select

    - task: DotNetCoreCLI@2
      displayName: 'build task'
      inputs:
        command: build
        projects: '${{parameters.project}}'
        arguments: -c '${{parameters.buildconfig}}'
    
    - task: DotNetCoreCLI@2
      displayName: 'publish task'
      inputs:
        command: publish
        projects: '${{parameters.project}}'
        arguments: -c '${{parameters.buildconfig}}' -o $(build.artifactsdirectory)


    - task: PublishBuildArtifacts@1
      displayName: 'publish artifact task'
      inputs:
        ArtifactName: artifact
        publishLocation: Container
        PathtoPublish: $(build.artifactsdirectory)

